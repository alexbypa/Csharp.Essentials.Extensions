using CSharpEssentials.LoggerHelper.AI.Application;
using CSharpEssentials.LoggerHelper.AI.Domain;

namespace Web.Api.MinimalApi.Endpoints.AI;
public class ApiAIHelperDemo : IEndpointDefinition {
    public void DefineEndpoints(WebApplication app) {
        app.MapPost("/IAI/run", async (IActionOrchestrator orc, MacroContext ctx, CancellationToken ct) =>
            Results.Ok(await orc.RunAsync(ctx, ct)))
                .WithTags("AI")
                .WithSummary("Demo")
                .WithDescription("Call the RAG AI helper to answer a query based on recent logs.")
                .Produces<string>(StatusCodes.Status200OK)
                .ProducesProblem(StatusCodes.Status400BadRequest)
                .ProducesProblem(StatusCodes.Status502BadGateway)
                .ProducesProblem(StatusCodes.Status504GatewayTimeout);
    }
}
